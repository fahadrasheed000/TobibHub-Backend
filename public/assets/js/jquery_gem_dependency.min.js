!function(c,d){"use strict";d!==c.rails&&c.error("jquery-ujs has already been loaded!");var a,b=c(document);c.rails=a={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return c("meta[name=csrf-token]").attr("content")},csrfParam:function(){return c("meta[name=csrf-param]").attr("content")},CSRFProtection:function(c){var b=a.csrfToken();b&&c.setRequestHeader("X-CSRF-Token",b)},refreshCSRFTokens:function(){c('form input[name="'+a.csrfParam()+'"]').val(a.csrfToken())},fire:function(b,d,e){var a=c.Event(d);return b.trigger(a,e),!1!==a.result},confirm:function(a){return confirm(a)},ajax:function(a){return c.ajax(a)},href:function(a){return a[0].href},isRemote:function(a){return d!==a.data("remote")&& !1!==a.data("remote")},handleRemote:function(b){var g,f,e,i,j,h;if(!a.fire(b,"ajax:before"))return!1;if(i=b.data("with-credentials")||null,j=b.data("type")||c.ajaxSettings&&c.ajaxSettings.dataType,b.is("form")){g=b.attr("method"),f=b.attr("action"),e=b.serializeArray();var k=b.data("ujs:submit-button");k&&(e.push(k),b.data("ujs:submit-button",null))}else b.is(a.inputChangeSelector)?(g=b.data("method"),f=b.data("url"),e=b.serialize(),b.data("params")&&(e=e+"&"+b.data("params"))):b.is(a.buttonClickSelector)?(g=b.data("method")||"get",f=b.data("url"),e=b.serialize(),b.data("params")&&(e=e+"&"+b.data("params"))):(g=b.data("method"),f=a.href(b),e=b.data("params")||null);return h={type:g||"GET",data:e,dataType:j,beforeSend:function(c,e){if(d===e.dataType&&c.setRequestHeader("accept","*/*;q=0.5, "+e.accepts.script),!a.fire(b,"ajax:beforeSend",[c,e]))return!1;b.trigger("ajax:send",c)},success:function(a,c,d){b.trigger("ajax:success",[a,c,d])},complete:function(a,c){b.trigger("ajax:complete",[a,c])},error:function(a,c,d){b.trigger("ajax:error",[a,c,d])},crossDomain:a.isCrossDomain(f)},i&&(h.xhrFields={withCredentials:i}),f&&(h.url=f),a.ajax(h)},isCrossDomain:function(c){var b=document.createElement("a");b.href=location.href;var a=document.createElement("a");try{return a.href=c,a.href=a.href,!((!a.protocol||":"===a.protocol)&&!a.host||b.protocol+"//"+b.host==a.protocol+"//"+a.host)}catch(d){return!0}},handleMethod:function(b){var f=a.href(b),k=b.data("method"),g=b.attr("target"),h=a.csrfToken(),i=a.csrfParam(),e=c('<form method="post" action="'+f+'"></form>'),j='<input name="_method" value="'+k+'" type="hidden" />';i===d||h===d||a.isCrossDomain(f)||(j+='<input name="'+i+'" value="'+h+'" type="hidden" />'),g&&e.attr("target",g),e.hide().append(j).appendTo("body"),e.submit()},formElements:function(a,b){return a.is("form")?c(a[0].elements).filter(b):a.find(b)},disableFormElements:function(b){a.formElements(b,a.disableSelector).each(function(){a.disableFormElement(c(this))})},disableFormElement:function(a){var b,c;b=a.is("button")?"html":"val",c=a.data("disable-with"),a.data("ujs:enable-with",a[b]()),c!==d&&a[b](c),a.prop("disabled",!0)},enableFormElements:function(b){a.formElements(b,a.enableSelector).each(function(){a.enableFormElement(c(this))})},enableFormElement:function(a){var b=a.is("button")?"html":"val";void 0!==a.data("ujs:enable-with")&&a[b](a.data("ujs:enable-with")),a.prop("disabled",!1)},allowAction:function(b){var d,e=b.data("confirm"),c=!1;if(!e)return!0;if(a.fire(b,"confirm")){try{c=a.confirm(e)}catch(f){(console.error||console.log).call(console,f.stack||f)}d=a.fire(b,"confirm:complete",[c])}return c&&d},blankInputs:function(b,d,f){var g,h,a=c(),e=b.find(d||"input,textarea");return e.each(function(){if((h=(g=c(this)).is("input[type=checkbox],input[type=radio]")?g.is(":checked"):!!g.val())===f){if(g.is("input[type=radio]")&&e.filter('input[type=radio]:checked[name="'+g.attr("name")+'"]').length)return!0;a=a.add(g)}}),!!a.length&&a},nonBlankInputs:function(b,c){return a.blankInputs(b,c,!0)},stopEverything:function(a){return c(a.target).trigger("ujs:everythingStopped"),a.stopImmediatePropagation(),!1},disableElement:function(b){var c=b.data("disable-with");b.data("ujs:enable-with",b.html()),c!==d&&b.html(c),b.bind("click.railsDisable",function(b){return a.stopEverything(b)})},enableElement:function(a){d!==a.data("ujs:enable-with")&&(a.html(a.data("ujs:enable-with")),a.removeData("ujs:enable-with")),a.unbind("click.railsDisable")}},a.fire(b,"rails:attachBindings")&&(c.ajaxPrefilter(function(b,d,c){b.crossDomain||a.CSRFProtection(c)}),c(window).on("pageshow.rails",function(){c(c.rails.enableSelector).each(function(){var a=c(this);a.data("ujs:enable-with")&&c.rails.enableFormElement(a)}),c(c.rails.linkDisableSelector).each(function(){var a=c(this);a.data("ujs:enable-with")&&c.rails.enableElement(a)})}),b.delegate(a.linkDisableSelector,"ajax:complete",function(){a.enableElement(c(this))}),b.delegate(a.buttonDisableSelector,"ajax:complete",function(){a.enableFormElement(c(this))}),b.delegate(a.linkClickSelector,"click.rails",function(d){var b=c(this),e=b.data("method"),h=b.data("params"),f=d.metaKey||d.ctrlKey;if(!a.allowAction(b))return a.stopEverything(d);if(!f&&b.is(a.linkDisableSelector)&&a.disableElement(b),a.isRemote(b)){if(f&&(!e||"GET"===e)&&!h)return!0;var g=a.handleRemote(b);return!1===g?a.enableElement(b):g.fail(function(){a.enableElement(b)}),!1}if(e)return a.handleMethod(b),!1}),b.delegate(a.buttonClickSelector,"click.rails",function(e){var b=c(this);if(!a.allowAction(b)||!a.isRemote(b))return a.stopEverything(e);b.is(a.buttonDisableSelector)&&a.disableFormElement(b);var d=a.handleRemote(b);return!1===d?a.enableFormElement(b):d.fail(function(){a.enableFormElement(b)}),!1}),b.delegate(a.inputChangeSelector,"change.rails",function(d){var b=c(this);return a.allowAction(b)&&a.isRemote(b)?(a.handleRemote(b),!1):a.stopEverything(d)}),b.delegate(a.formSubmitSelector,"submit.rails",function(h){var e,f,b=c(this),i=a.isRemote(b);if(!a.allowAction(b)||d===b.attr("novalidate")&&(e=a.blankInputs(b,a.requiredInputSelector,!1))&&a.fire(b,"ajax:aborted:required",[e]))return a.stopEverything(h);if(i){if(f=a.nonBlankInputs(b,a.fileInputSelector)){setTimeout(function(){a.disableFormElements(b)},13);var g=a.fire(b,"ajax:aborted:file",[f]);return g||setTimeout(function(){a.enableFormElements(b)},13),g}return a.handleRemote(b),!1}setTimeout(function(){a.disableFormElements(b)},13)}),b.delegate(a.formInputClickSelector,"click.rails",function(e){var b=c(this);if(!a.allowAction(b))return a.stopEverything(e);var d=b.attr("name"),f=d?{name:d,value:b.val()}:null;b.closest("form").data("ujs:submit-button",f)}),b.delegate(a.formSubmitSelector,"ajax:send.rails",function(b){this===b.target&&a.disableFormElements(c(this))}),b.delegate(a.formSubmitSelector,"ajax:complete.rails",function(b){this===b.target&&a.enableFormElements(c(this))}),c(function(){a.refreshCSRFTokens()}))}(jQuery)